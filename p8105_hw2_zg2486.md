p8105_hw2_zg2486
================
2024-09-27

# Problem 1

1.  Read and clean the data, select and convert variables.

``` r
subway_df = 
  read_csv(
    "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
    na = c("NA", "", ".")) %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = case_match(
      entry,
     "YES" ~ TRUE,
     "NO" ~ FALSE)
    ) 
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Variables included in this dataset are: line, station name, station
latitude, station longitude, served routes (route 1 - 11), entry,
vending, entrance type, and ADA compliance. I used
`janitor::clean_names` to clean up column names of data after importing
data file with specifying missing values, then retained 19 required
variables by `select` function, lastly, converted entry variable from
character to logical variable by `mutate(case_match)` function. There
are 1,868 rows and 19 columns.These data are not tidy yet.

2.  Answer 3 questions.

``` r
distinct_station = group_by(subway_df, station_name) %>% 
  distinct(line) 

view(distinct_station)

ada_station = filter(subway_df, ada == TRUE) %>% 
  group_by(station_name) %>% 
  distinct(line)

list(ada_distinct_station)

no_vending = filter(subway_df, vending == "NO") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()

entrance_allow = filter(subway_df, vending == "NO") %>% 
  filter(entry == TRUE) %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()

proportion_entry = entrance_allow / no_vending
```

There are 465 distinct stations and 84 stations are ADA compliant.The
proportion of station entrances / exits without vending allow entrance
is 43.43%.

3.  Reformat data.

``` r
str(subway_df)
```

    ## tibble [1,868 × 19] (S3: tbl_df/tbl/data.frame)
    ##  $ line             : chr [1:1868] "4 Avenue" "4 Avenue" "4 Avenue" "4 Avenue" ...
    ##  $ station_name     : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
    ##  $ station_latitude : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
    ##  $ station_longitude: num [1:1868] -74 -74 -74 -74 -74 ...
    ##  $ route1           : chr [1:1868] "R" "R" "N" "N" ...
    ##  $ route2           : chr [1:1868] NA NA "R" "R" ...
    ##  $ route3           : chr [1:1868] NA NA NA NA ...
    ##  $ route4           : chr [1:1868] NA NA NA NA ...
    ##  $ route5           : chr [1:1868] NA NA NA NA ...
    ##  $ route6           : chr [1:1868] NA NA NA NA ...
    ##  $ route7           : chr [1:1868] NA NA NA NA ...
    ##  $ route8           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route9           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route10          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ route11          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ entrance_type    : chr [1:1868] "Stair" "Stair" "Stair" "Stair" ...
    ##  $ entry            : logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
    ##  $ vending          : chr [1:1868] "YES" "YES" "YES" "YES" ...
    ##  $ ada              : logi [1:1868] FALSE FALSE FALSE FALSE FALSE FALSE ...

``` r
reformat_df = subway_df %>%
  mutate(route8 = as.character(route8)) %>% 
  mutate(route9 = as.character(route9)) %>% 
  mutate(route10 = as.character(route10)) %>% 
  mutate(route11 = as.character(route11)) %>% 
  pivot_longer(
    route1:route9,
    names_to = "route_number",
    values_to = "route_name")

a_train = filter(reformat_df, route_name == "A") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()


ada_a_train = filter(reformat_df, ada == TRUE) %>% 
  filter(route_name == "A") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()
```

There are 60 distinct stations serve the A train. There are 17 ADA
compliant of the stations that serve the A train.

# Problem 2

``` r
mr_df = 
  read_excel("./202309 Trash Wheel Collection Data.xlsx",
             sheet = "Mr. Trash Wheel", na = c("NA", "", "."),
  ) %>% 
  select(-starts_with("...")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(year = as.numeric(year)) %>% 
  mutate(sports_balls = as.integer(sports_balls)) %>% 
  mutate(name = "Mr") 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
professor_df = 
  read_excel("./202309 Trash Wheel Collection Data.xlsx",
             sheet = "Professor Trash Wheel", na = c("NA", "", ".")
  ) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(name = "Professor")

gwynnda_df = 
  read_excel("./202309 Trash Wheel Collection Data.xlsx",
             sheet = "Gwynnda Trash Wheel", na = c("NA", "", ".")
  ) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(name = "Gwynnda")

wheel_tidy = 
  bind_rows(mr_df, professor_df, gwynnda_df) %>% 
  janitor::clean_names() %>% 
  relocate(name) 

total_weight = 
  wheel_tidy %>% 
  filter(name == "Professor") %>% 
  summarise(total_weight = sum(weight_tons))

view (total_weight)

total_number = 
  wheel_tidy %>% 
  filter(name == "Gwynnda", month == "June", year == 2022) %>% 
  summarise(total_number = sum(cigarette_butts))

view(total_number)
```

There are total 845 observations in the combined dataset, the key
variables include date, weight_tons, volume_cubic_yards,
plastic_bottles, and wrappers. The total weight of trash collected by
Professor Trash Wheel is 216.26 tons. There total number of cigarette
butts collected by Gwynda in June of 2022 are 18,120.

# Problem 3

``` r
bakers_df = 
  read.csv("./gbb_datasets/bakers.csv", 
           na = c("NA", "", ".")) %>% 
  janitor::clean_names() %>% 
  mutate(baker = word(baker_name, 1)) 
  
  bakes_df = 
  read.csv("./gbb_datasets/bakes.csv",
           na = c("NA", "", ".")) %>% 
  janitor::clean_names() 

results_df = 
  read.csv("./gbb_datasets/results.csv",
           na = c("NA", "", "."),
           skip = 2) %>% 
  janitor::clean_names() 

str(bakers_df)
```

    ## 'data.frame':    120 obs. of  6 variables:
    ##  $ baker_name      : chr  "Ali Imdad" "Alice Fevronia" "Alvin Magallanes" "Amelia LeBruin" ...
    ##  $ series          : int  4 10 6 10 7 1 9 4 2 7 ...
    ##  $ baker_age       : int  25 28 37 24 25 30 30 31 31 23 ...
    ##  $ baker_occupation: chr  "Charity worker" "Geography teacher" "Nurse" "Fashion designer" ...
    ##  $ hometown        : chr  "Saltley, Birmingham" "Essex" "Bracknell, Berkshire" "Halifax" ...
    ##  $ baker           : chr  "Ali" "Alice" "Alvin" "Amelia" ...

``` r
str(bakes_df)
```

    ## 'data.frame':    548 obs. of  5 variables:
    ##  $ series        : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ episode       : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ baker         : chr  "Annetha" "David" "Edd" "Jasminder" ...
    ##  $ signature_bake: chr  "Light Jamaican Black Cakewith Strawberries and Cream" "Chocolate Orange Cake" "Caramel Cinnamon and Banana Cake" "Fresh Mango and Passion Fruit Hummingbird Cake" ...
    ##  $ show_stopper  : chr  "Red, White & Blue Chocolate Cake with Cigarellos, Fresh Fruit, and Cream" "Black Forest Floor Gateauxwith Moulded Chocolate Leaves, Fallen Fruitand Chocolate Mushrooms Moulded from eggs" "N/A" "N/A" ...

``` r
str(results_df)
```

    ## 'data.frame':    1136 obs. of  5 variables:
    ##  $ series   : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ episode  : int  1 1 1 1 1 1 1 1 1 1 ...
    ##  $ baker    : chr  "Annetha" "David" "Edd" "Jasminder" ...
    ##  $ technical: int  2 3 1 NA 9 NA 8 NA 10 NA ...
    ##  $ result   : chr  "IN" "IN" "IN" "IN" ...

``` r
bakers_results_df =
  anti_join(results_df, bakers_df, by = c("series", "baker" ))

bakers_results = left_join(bakers_df, results_df, by = c("series", "baker" ))

final_df = 
  anti_join(bakes_df, bakers_results, by = c("series", "baker", "episode"))
```
