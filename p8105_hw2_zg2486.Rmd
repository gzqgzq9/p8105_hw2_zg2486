---
title: "p8105_hw2_zg2486"
output: github_document
date: "2024-09-27"
---

# Problem 1

```{r setup, include=FALSE}
library(tidyverse)
library(readxl)
```

1. Read and clean the data, select and convert variables.
```{r}
subway_df = 
  read_csv(
    "./NYC_Transit_Subway_Entrance_And_Exit_Data.csv", 
    na = c("NA", "", ".")) %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = case_match(
      entry,
     "YES" ~ TRUE,
     "NO" ~ FALSE)
    ) 
```

Variables included in this dataset are: line, station name, station latitude, station longitude, served routes (route 1 - 11), entry, vending, entrance type, and ADA compliance. I used `janitor::clean_names` to clean up column names of data after importing data file with specifying missing values, then retained 19 required variables by `select` function, lastly, converted entry variable from character to logical variable by `mutate(case_match)` function. There are 1,868 rows and 19 columns.These data are not tidy yet.

2. Answer 3 questions.
```{r eval=FALSE}
distinct_station = group_by(subway_df, station_name) %>% 
  distinct(line) 

view(distinct_station)

ada_station = filter(subway_df, ada == TRUE) %>% 
  group_by(station_name) %>% 
  distinct(line)

list(ada_distinct_station)

no_vending = filter(subway_df, vending == "NO") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()

entrance_allow = filter(subway_df, vending == "NO") %>% 
  filter(entry == TRUE) %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()

proportion_entry = entrance_allow / no_vending
```
There are 465 distinct stations and 84 stations are ADA compliant.The proportion of station entrances / exits without vending allow entrance is 43.43%.

3. Reformat data.
```{r}
str(subway_df)

reformat_df = subway_df %>%
  mutate(route8 = as.character(route8)) %>% 
  mutate(route9 = as.character(route9)) %>% 
  mutate(route10 = as.character(route10)) %>% 
  mutate(route11 = as.character(route11)) %>% 
  pivot_longer(
    route1:route9,
    names_to = "route_number",
    values_to = "route_name")

a_train = filter(reformat_df, route_name == "A") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()


ada_a_train = filter(reformat_df, ada == TRUE) %>% 
  filter(route_name == "A") %>% 
  group_by(station_name) %>% 
  distinct(line) %>% 
  nrow()
```
There are 60 distinct stations serve the A train. There are 17 ADA compliant of the stations that serve the A train.







